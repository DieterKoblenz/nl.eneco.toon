<script type="application/javascript">
    Homey.emit('get_toon', function (err, data) {
        if (!err && data) {
            if (data.length > 1) {
                Homey.showView("list_toon_devices");
                Homey.emit("get_devices", data);
            }
            else if (data.length == 1) {
                Homey.setTitle(__('pair.found_toon'));
                $("#toon_explained").show();
                Homey.addDevice(data[0], function (err, result) {
                    if (!err && result) {
                        Homey.emit("add_toon", data[0]);
                    }
                });
            } else {
                Homey.setTitle(__('pair.no_toon'));
                $("#no_toon_explained").show();
            }
        }
        else if (err && data) {
            Homey.setTitle(__('pair.installed_toon'));
            $("#toon_installed_explained").show();
        }
        else if (err && !data) {
            Homey.setTitle(__('pair.no_toon'));
            $("#no_toon_explained").show();
        }
    });
</script>
<p id="toon_explained" data-i18n="pair.found_toon_explained" style="display:none"></p>
<div id="toon_installed_explained" style="display:none">
    <p data-i18n="pair.installed_toon_explained"></p>
</div>
<div id="no_toon_explained" style="display:none">
    <p data-i18n="pair.no_toon_explained"></p>
</div>